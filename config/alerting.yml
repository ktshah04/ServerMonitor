apiVersion: 1

contactPoints:
  - orgId: 1
    name: slack-alerts-storage
    receivers:
      - uid: slack-alerts-storage
        type: slack
        settings:
          url: ${SLACK_WEBHOOK_URL}
          title: "{{ range .Alerts }}Storage Alert - {{ .Labels.hostname }} ({{ .Labels.device }}){{ end }}"
          text: "{{ range .Alerts }}⚠️ {{ .Labels.mountpoint }} is more than 90% full{{ end }}"
        disableResolveMessage: false
  - orgId: 1
    name: slack-alerts-storage-projection
    receivers:
      - uid: slack-alerts-storage-projection
        type: slack
        settings:
          url: ${SLACK_WEBHOOK_URL}
          title: "{{ range .Alerts }}Storage Projection - {{ .Labels.hostname }} ({{ .Labels.device }}){{ end }}"
          text: "{{ range .Alerts }}{{ .Labels.mountpoint }} is projected to fill within 30 days based on current usage trends{{ end }}"
        disableResolveMessage: false
  - orgId: 1
    name: slack-alerts-system
    receivers:
      - uid: slack-alerts-system
        type: slack
        settings:
          url: ${SLACK_WEBHOOK_URL}
          title: "{{ range .Alerts }}{{ .Labels.alertname }} - {{ .Labels.hostname }}{{ end }}"
          text: "{{ range .Alerts }}⚠️ {{ .Annotations.summary }}{{ end }}"
        disableResolveMessage: false
